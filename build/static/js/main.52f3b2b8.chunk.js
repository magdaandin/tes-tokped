(this["webpackJsonptes-tokopedia"]=this["webpackJsonptes-tokopedia"]||[]).push([[0],{101:function(e,t,n){},106:function(e,t,n){},107:function(e,t,n){},112:function(e,t,n){},113:function(e,t,n){},114:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n(3),o=n.n(c),s=n(84),i=n.n(s),r=(n(41),n(94)),l=n(117),m=n(11),d=n(10),j=n(95),u=n(85),b=n(30),O=n(86);n(101);function h(e){var t=e.img,n=e.text;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("img",{src:t,className:"img-item",alt:t}),Object(a.jsx)("p",{className:"navbar-text",children:n})]})}var p=function(){var e=Object(c.useState)(!1),t=Object(b.a)(e,2),n=t[0],o=t[1],s=Object(c.useState)([]),i=Object(b.a)(s,2),r=i[0],l=i[1],p=Object(d.g)(),f=Object(O.useMediaQuery)({query:"(max-width: 960px)"});return Object(c.useEffect)((function(){return p.listen((function(e){"PUSH"===p.action&&l([e.key]),"POP"===p.action&&(r[1]===e.key?"/my-pokemon-action"===e.pathname?p.replace("/"):l((function(e){var t=Object(u.a)(e);t[0];return t.slice(1)})):"/my-pokemon-action"===e.pathname?p.replace("/"):l((function(t){return[e.key].concat(Object(j.a)(t))})))}))}),[r,p]),Object(c.useEffect)((function(){"/my-pokemon-action"===p.location.pathname&&window.addEventListener("beforeunload",p.replace("/"))}),[p]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("nav",{className:!n&&f?"display-none":"navbar",children:Object(a.jsxs)("div",{className:"navbar-container",children:[Object(a.jsx)(m.c,{to:"/pokemon-details",exact:!0,isActive:function(e){o(!!e)},className:"display-none"}),Object(a.jsx)(m.b,{to:"/",className:n&&f?"display-none":"navbar-logo"}),Object(a.jsxs)("ul",{className:f?"navbar-menu flex-start":"navbar-menu",children:[Object(a.jsx)("li",{className:n&&f?"navbar-item":"display-none",children:Object(a.jsx)("div",{className:"navbar-links back",onClick:function(){p.goBack()},children:Object(a.jsx)(h,{text:"BACK"})})}),Object(a.jsx)("li",{className:n&&f?"display-none":"navbar-item",children:Object(a.jsx)(m.c,{className:"navbar-links",to:"/",exact:!0,children:Object(a.jsx)(h,{text:"EXPLORE"})})}),Object(a.jsx)("li",{className:n&&f?"display-none":"navbar-item",children:Object(a.jsx)(m.c,{className:"navbar-links",to:"/my-pokemon-list",children:Object(a.jsx)(h,{text:"MY POKEMON LIST"})})})]})]})}),Object(a.jsx)("nav",{className:n||f?"navbar-bottom":"display-none",children:Object(a.jsx)("div",{className:"navbar-container",children:Object(a.jsxs)("ul",{className:"navbar-menu",children:[Object(a.jsx)("li",{className:n&&!f?"display-none":"navbar-item",children:Object(a.jsx)(m.c,{className:"navbar-links",to:"/",exact:!0,children:Object(a.jsx)(h,{text:"EXPLORE"})})}),Object(a.jsx)("li",{className:n&&!f?"display-none":"navbar-item",children:Object(a.jsx)(m.c,{className:"navbar-links",to:"/my-pokemon-list",children:Object(a.jsx)(h,{text:"MY POKEMON LIST"})})})]})})})]})},f=n(28),v=n(29),k=n(37),x=n(36),g=n(58),A=n(25),N=n.n(A);function y(){var e=Object(g.a)(["\n  query pokemon($name: String!) {\n    pokemon(name: $name) {\n      id @client\n      name @client\n      sprites {\n        front_default @client\n      }\n    \n      moves {\n        move {\n          name @client\n        }\n      }\n      types {\n        type {\n          name @client\n        }\n      }\n    }\n  }\n"]);return y=function(){return e},e}function P(){var e=Object(g.a)(["\n  query pokemon($name: String!) {\n    pokemon(name: $name) {\n      id\n      name\n      sprites {\n        front_default\n      }\n\n      moves {\n        move {\n          name\n        }\n      }\n      types {\n        type {\n          name\n        }\n      }\n    }\n  }\n"]);return P=function(){return e},e}function E(){var e=Object(g.a)(["\n  query pokemons($limit: Int, $offset: Int) {\n    pokemons(limit: $limit, offset: $offset) {\n      results {\n        id\n        name\n        image\n      }\n    }\n  }\n"]);return E=function(){return e},e}var w=N()(E()),C=N()(P()),S=(N()(y()),n(88)),I=n.n(S).a.open("MYPOKEMON",1,(function(e){e.createObjectStore("Pokemons",{keyPath:"myPokemonId"}).createIndex("myPokemonId","myPokemonId",{unique:!1})})),R=new(function(){function e(){Object(f.a)(this,e)}return Object(v.a)(e,[{key:"catchPokemon",value:function(e){I.then((function(t){var n=t.transaction("Pokemons","readwrite"),a=n.objectStore("Pokemons");return console.log(e),a.put(e),n.complete})).then((function(){console.log("Pokemon catched.")}))}},{key:"releasePokemon",value:function(e){I.then((function(t){var n=t.transaction("Pokemons","readwrite"),a=n.objectStore("Pokemons");return console.log(e),a.delete(e),n.complete})).then((function(){console.log("Pokemon released.")}))}},{key:"getMyPokemons",value:function(){return new Promise((function(e){I.then((function(e){return e.transaction("Pokemons","readonly").objectStore("Pokemons").getAll()})).then((function(t){e(t),console.log("Got your Pokemons!")}))}))}},{key:"getMyPokemonById",value:function(e){return new Promise((function(t){I.then((function(t){return t.transaction("Pokemons","readonly").objectStore("Pokemons").get(e)})).then((function(e){t(e),console.log("Got the Pokemon!")}))}))}}]),e}());n(106);var F=function(e){var t=e.text;return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{className:"loading-container",children:[Object(a.jsx)("div",{className:"loading-image-container"}),t&&Object(a.jsx)("div",{className:"loading-text",children:t})]})})};n(107);function B(e){var t=e.pokemon,n=void 0!==t.myPokemonId;return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("div",{className:"card",children:Object(a.jsxs)("div",{className:"card-container",children:[Object(a.jsxs)(m.b,{to:{pathname:"/pokemon-details",state:{pokemon:t}},className:"card-link",children:[n&&t.sprites?Object(a.jsx)("img",{src:t.sprites.front_default,className:"card-img",alt:t.name}):Object(a.jsx)("img",{src:t.image,className:"card-img",alt:t.name}),Object(a.jsx)("div",{className:"card-title",children:t.name})]},t.id),n?Object(a.jsx)(m.b,{to:{pathname:"/my-pokemon-action",state:{pokemon:t,isCatching:!1}},onClick:function(){t.myPokemonId&&R.releasePokemon(t.myPokemonId)},className:"button-container button card-link",children:Object(a.jsx)("div",{className:"card-button-text",children:"REMOVE"})}):Object(a.jsxs)("div",{className:"card-owned-text",children:["TOTAL OWNED: ",t.count]})]})})})}var D=function(e){var t=e.pokemons,n=Object(d.g)(),o=!!n&&"/my-pokemon-list"===n.location.pathname,s=Object(c.useState)(t),i=Object(b.a)(s,2),r=i[0],m=i[1],j=Object(c.useState)(10),u=Object(b.a)(j,2),O=u[0],h=u[1],p=Object(l.useQuery)(w,{variables:{limit:O,offset:0},skip:o}),f=p.loading,v=p.data,k=(v=void 0===v?{}:v).pokemons,x=(k=void 0===k?{}:k).results,g=void 0===x?[]:x,A=p.error;return Object(c.useEffect)((function(){f||o||m(g)}),[f,o,g,r]),A?Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(F,{text:"No data found!"})}):(r&&!o&&r.forEach((function(e){var n=0;t.forEach((function(t){e.id===t.id&&n++})),e.count=n})),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"cards-container",children:r&&r.map((function(e){return Object(a.jsx)(B,{pokemon:e},o?e.myPokemonId:e.id)}))}),!o&&Object(a.jsx)("div",{className:"button-container",children:f?Object(a.jsx)(F,{}):Object(a.jsx)("div",{className:"button",onClick:function(){h(O+20)},children:"Load more"})})]}))},M=function(e){Object(k.a)(n,e);var t=Object(x.a)(n);function n(e){var a;return Object(f.a)(this,n),(a=t.call(this,e)).state={data:[]},a.getPokemons(),a}return Object(v.a)(n,[{key:"getPokemons",value:function(){var e=this;R.getMyPokemons().then((function(t){e.setState({data:t})}))}},{key:"render",value:function(){return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(D,{pokemons:this.state.data})})}}]),n}(o.a.Component),Q=function(e){Object(k.a)(n,e);var t=Object(x.a)(n);function n(e){var a;return Object(f.a)(this,n),(a=t.call(this,e)).state={data:[]},a.getPokemons(),a}return Object(v.a)(n,[{key:"getPokemons",value:function(){var e=this;R.getMyPokemons().then((function(t){e.setState({data:t})}))}},{key:"render",value:function(){return this.state.data.length>0?Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(D,{pokemons:this.state.data})}):Object(a.jsx)(F,{text:"You have no Pokemons yet!"})}}]),n}(o.a.Component),U=n(47),L=n(118),q=(n(112),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAAkElEQVR4Ae3OgQWAYBiE4QYIEBogNEIIbdE4jdB4jdAA/wB/hwPFJ/B1cccLDp7mJ/O8Dq2oVcDMqKCKDtRrYNDXqOGBEUDtqAaoNgMxovklas3AnKi8QBXUZWAqC1D8sjAR6htMjBqSMTEqBZMA0sQYY4wxxhjDbToYgnQwBOlgCNLBECSD4Rai7k1Ifp53AbHE8jDp7bA+AAAAAElFTkSuQmCC"),Y=n.p+"static/media/open_pokeball.327609e2.png",T=n.p+"static/media/pokeball.9fc0eeae.png";var K=function(e){var t=e?e.pokemon:null,n=!!t&&(!!t.pokemon&&!!t.pokemon.myPokemonId),o=Math.random()<.5,s=Object(c.useState)(t?t.pokemon:null),i=Object(b.a)(s,2),r=i[0],d=i[1],j=Object(c.useState)(r?r.name:null),u=Object(b.a)(j,2),O=u[0],h=u[1],p=Object(l.useQuery)(C,{variables:{name:O},skip:n}),f=p.loading,v=p.data,k=(v=void 0===v?{}:v).pokemon,x=void 0===k?[]:k,g=p.error,A=Object(c.useState)(!1),N=Object(b.a)(A,2),y=N[0],P=N[1],E=Object(c.useRef)();return Object(c.useEffect)((function(){y&&E.current.focus()}),[y]),Object(c.useEffect)((function(){d((function(e){return Object(U.a)(Object(U.a)({},e),{},{name:O})}))}),[O]),Object(c.useEffect)((function(){f||n||d(x)}),[f]),f?Object(a.jsx)(F,{}):g?Object(a.jsx)(F,{text:"No data found!"}):Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{className:"details-container",children:[Object(a.jsxs)("div",{className:"details-header",children:[r.sprites?Object(a.jsx)("img",{src:r.sprites.front_default,className:"details-img",alt:"item"}):null,r.types?Object(a.jsx)("div",{className:"details-types-container",children:Object(a.jsx)("div",{className:"details-values",children:r.types.map((function(e){return Object(a.jsx)("div",{className:"details-value-type",children:e.type.name},e.type.name)}))})}):null,Object(a.jsxs)("form",{className:"details-name-container",children:[Object(a.jsx)("input",{className:y?"details-name":"details-name center",type:"text",ref:E,value:r.name?r.name:"",onChange:function(e){var t=e.target.value;h(t)},onKeyDown:function(e){13===e.keyCode&&w()},disabled:y?"":"disabled"}),n?Object(a.jsx)("div",{onClick:function(){y?w():(P(!0),E.current.focus())},className:"details-edit-container",children:Object(a.jsx)("img",{src:q,alt:q,className:"details-edit"})}):null]}),r.moves?Object(a.jsxs)("div",{className:"details-pokemon-container",children:[Object(a.jsx)("div",{className:"details-title",children:"MOVES"}),Object(a.jsx)("div",{className:"details-values",children:r.moves.map((function(e){return Object(a.jsx)("div",{className:"details-value",children:e.move.name},e.move.name)}))})]}):null]}),n?Object(a.jsx)(m.b,{to:{pathname:"/my-pokemon-action",state:{pokemon:r,isCatching:!1}},onClick:function(){r.myPokemonId&&R.releasePokemon(r.myPokemonId)},className:y?"details-button-container hide":"details-button-container",children:Object(a.jsxs)("div",{className:"details-button",children:[Object(a.jsx)("img",{src:Y,className:"details-button-img",alt:Y}),Object(a.jsx)("div",{className:"details-button-text",children:"RELEASE"})]})},r.id):Object(a.jsx)(m.b,{to:{pathname:"/my-pokemon-action",state:{pokemon:r,isCatching:!0,isSuccessful:o}},onClick:function(){if(o){r.myPokemonId=Object(L.a)(),R.catchPokemon(r)}},className:"details-button-container",children:Object(a.jsxs)("div",{className:"details-button",children:[Object(a.jsx)("img",{src:T,className:"details-button-img",alt:T}),Object(a.jsx)("div",{className:"details-button-text",children:"CAPTURE"})]})},r.id)]})});function w(){d(Object(U.a)(Object(U.a)({},r),{},{name:r.name})),R.catchPokemon(r),P(!1)}},V=function(e){Object(k.a)(n,e);var t=Object(x.a)(n);function n(e){var a;return Object(f.a)(this,n),(a=t.call(this,e)).state={data:e.location?e.location.state:{}},a}return Object(v.a)(n,[{key:"render",value:function(){if(!this.state.data)return Object(a.jsx)(d.a,{to:"/"});var e=this.state.data;return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(K,{pokemon:e})})}}]),n}(o.a.Component),W="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAQAAABLCVATAAAATUlEQVRIie3MOxEAIBAD0RSU+KNEAlIQggyEwTF8DOQaZrLbP0Cdiu3CDJumNrNOPkxHFCNGDM0A9UENgYFEiRJFUpmDLlVZZlMuzFdNO/WPEVqT7vQAAAAASUVORK5CYII=",G="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAAW0lEQVR4Ae3OgQWAIRBA4R8/QgO0ZaM0SGM0ROPUReAIkDt5jwfA970e5b0bzNhnRxh7VJC7wpijEihQoO4EChSoKLcDqIABswIDBgwYg365esFolD1GoxSGaAKRQaqRlGw8/QAAAABJRU5ErkJggg==",J=n.p+"static/media/footprints.187beaa7.png",$=n.p+"static/media/gotcha.e52aa4c3.png";n(113);var Z=function(e){var t=e.pokemon,n=e.isCatching,c=e.isSuccessful;return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{className:"action-pokemon-container",children:[Object(a.jsx)("div",{className:"action-pokemon-image-container",children:Object(a.jsx)("img",{className:"action-pokemon-image",src:n&&c?$:J,alt:n&&c?$:J})}),Object(a.jsx)("div",{className:"action-pokemon-title",children:n&&c?"SUCCESSFUL!":n?"FAILED!":"RELEASED!"}),Object(a.jsx)("div",{className:"action-pokemon-subtitle",children:n&&c?"Gotta catch em' all!":n?"It ran away...":"Goodbye friend!"}),Object(a.jsx)("div",{className:"action-pokemon-button-container",children:n&&c?Object(a.jsx)(m.b,{className:"action-pokemon-button",to:{pathname:"/pokemon-details",state:{pokemon:t}},children:Object(a.jsx)("img",{src:G,alt:G})}):Object(a.jsx)(m.b,{className:"action-pokemon-button",to:{pathname:"/"},children:Object(a.jsx)("img",{src:W,alt:W})})})]})})},_=function(e){Object(k.a)(n,e);var t=Object(x.a)(n);function n(e){var a;return Object(f.a)(this,n),(a=t.call(this,e)).state={data:e.location?e.location.state:null},a}return Object(v.a)(n,[{key:"render",value:function(){if(void 0===this.state.data)return Object(a.jsx)(d.a,{to:"/"});var e=this.state.data?this.state.data.pokemon:null,t=this.state.data?this.state.data.isCatching:null,n=this.state.data?this.state.data.isSuccessful:null;return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(Z,{pokemon:e,isCatching:t,isSuccessful:n})})}}]),n}(o.a.Component);var X=function(){var e=new r.a({uri:"https://graphql-pokeapi.vercel.app/api/graphql"});return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(l.ApolloProvider,{client:e,children:Object(a.jsxs)(m.a,{basename:"/tes-tokped",children:[Object(a.jsx)(p,{}),Object(a.jsx)("div",{className:"container",children:Object(a.jsxs)(d.d,{children:[Object(a.jsx)(d.b,{path:"/",exact:!0,component:M}),Object(a.jsx)(d.b,{path:"/my-pokemon-list",exact:!0,component:Q}),Object(a.jsx)(d.b,{path:"/pokemon-details",exact:!0,component:V}),Object(a.jsx)(d.b,{path:"/my-pokemon-action",exact:!0,component:_})]})})]})})})},H=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function z(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var ee=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,119)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,o=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),o(e),s(e)}))};i.a.render(Object(a.jsx)(X,{}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/tes-tokped",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/tes-tokped","/service-worker.js");H?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):z(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):z(t,e)}))}}(),ee()},41:function(e,t,n){}},[[114,1,2]]]);
//# sourceMappingURL=main.52f3b2b8.chunk.js.map